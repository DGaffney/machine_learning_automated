<div class="row">
  <div class="col-sm-8">
    <h1><%= current_user.first_name %>'s datasets</h1>
    <% if @datasets.empty? %>
      <p>You currently don't have any datasets uploaded. In order to get started, add one to the right</p>
    <% else %>
      <% @datasets.each do |dataset| %>
        <%= dataset.filename %> | 
        <%= dataset.pred_acc_text[dataset.prediction_accuracy] %> | 
        <%= dataset.pred_spd_text[dataset.prediction_speed] %> | 
        <%= dataset.last_analyzed_at.nil? ?  "Never Analyzed" : dataset.last_analyzed_at %> | 
        <%= dataset.current_status %> | 
        <br />
      <% end %>
    <% end %>
  </div>
  <div class="col-sm-4">
    <h3>Add a New Dataset</h3>
    <form action="/preview" method="POST" enctype="multipart/form-data">
      <div class="row">
        <div class="col-sm-12">
          <div class="input-group">
            <input type="file" name="file" class="file">
            <span class="input-group-addon"><i class="fa fa-database" aria-hidden="true"></i></span>
            <input type="text" class="form-control input-lg" disabled="" placeholder="Select Dataset">
            <span class="input-group-btn">
              <button class="browse btn btn-primary input-lg" type="button"><i class="glyphicon glyphicon-search"></i> Browse</button>
            </span>
          </div>
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-sm-12">
          <button type="submit" class="btn btn-primary">Upload CSV</button>
        </div>
      </div>
    </form>
    <script>
      $(document).on('click', '.browse', function(){
        var file = $(this).parent().parent().find('.file');
        console.log($(this).parent().parent().children())
        file.trigger('click');
      });
      $(document).on('change', '.file', function(){
        $(this).parent().find('.form-control').val($(this).val().replace(/C:\\fakepath\\/i, ''));
      });
    </script>
  </div>
</div>
